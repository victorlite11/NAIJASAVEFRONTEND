<!-- alert -->
<app-alert [message]="feedback" [type]="type" *ngIf="feedback != ''"></app-alert>


<app-header [title]="'SIGNUP'" [canMoveBack]="false" [loggedIn]="false"></app-header>

<main class="body shadow pull-up-3">
  <section class="mt-5">
    <p>If you already have an account, please <a [routerLink]="['/home']" class="styled-link">Sign in</a></p>
    <form [formGroup]="firstFormGroup" fxLayout="column">
      <!-- Phone Number -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Phone Number</label>

        <section class="input-container d-flex align-items-center">
           <input formControlName="phoneNumber" type="tel" class="input flex-grow-1" placeholder="Ex : 08155909541" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="firstFormGroup.controls['phoneNumber'].errors?.required">This field is mandatory</a>
        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="firstFormGroup.controls['phoneNumber'].errors?.minlength">Invalid phone number provided (must be 11 digits)</a>
      </section>

      <!-- Email -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Email [Optional]</label>

        <section class="input-container d-flex align-items-center">
           <input formControlName="email" type="email" class="input flex-grow-1" placeholder="Ex : someone@gmail.com" />
        </section>
      </section>

      <!-- Password -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Password</label>

        <section class="input-container d-flex align-items-center">
           <input formControlName="password" type="password" class="input flex-grow-1" placeholder="Ex : edy7hse3t42" />
        </section>


        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="firstFormGroup.controls['password'].errors?.required">This field is mandatory</a>
        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="firstFormGroup.controls['password'].errors?.minlength">Mininum of 6 characters required</a>
      </section>

      <!-- Account type -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Account Type</label>

        <section class="input-container d-flex align-items-center">
            <mat-radio-group formControlName="accountType">
              <mat-radio-button value="contributor">Contributor</mat-radio-button>
              <mat-radio-button value="investor">Investor</mat-radio-button>
            </mat-radio-group>
        </section>
      </section>
    </form>

    <form [formGroup]="secondFormGroup" fxLayout="column">
      <!-- Full Name -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Full Name</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="name" type="text" class="input flex-grow-1" placeholder="Ex : Edicha Joshua" />
        </section>

        <a class="clickable justify-self-end align-self-end text-right">Note: Should be same as bank account name</a>
      </section>

      <!-- Date -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Date of Birth</label>

        <section class="input-container d-flex align-items-start">
          <mat-form-field class="w-100 no-border">
            <input formControlName="dateOfBirth" matInput [matDatepicker]="picker">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="secondFormGroup.controls['dateOfBirth'].errors?.required">This field is mandatory</a>

      </section>

      <!-- Next of Kin -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Next of Kin</label>

        <section class="input-container d-flex align-items-center">
         <input formControlName="nextOfKin" type="text" class="input flex-grow-1" placeholder="Ex : Edicha Joshua" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="secondFormGroup.controls['nextOfKin'].errors?.required">This field is mandatory</a>
      </section>

      <!-- Gender -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
          <label class="label">Gender</label>

          <section class="input-container d-flex align-items-center">
            <mat-radio-group formControlName="gender">
              <mat-radio-button value="male" class="margin-right-point-5em">Male</mat-radio-button>
              <mat-radio-button value="female" class="margin-right-point-5em">Female</mat-radio-button>
              <mat-radio-button value="other">Other</mat-radio-button>
            </mat-radio-group>
          </section>
      </section>
    </form>
    <form [formGroup]="identityFormGroup" fxLayout="column">
      
      <!-- Nationality -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Nationality</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="nationality" type="text" class="input flex-grow-1" placeholder="Ex : Nigerian" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="identityFormGroup.controls['nationality'].errors?.required">This field is mandatory</a>
      </section>

      <!-- State -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">State</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="state" type="text" class="input flex-grow-1" placeholder="Ex : Lagos" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="identityFormGroup.controls['state'].errors?.required">This field is mandatory</a>
      </section>

      <!-- LGA -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">LGA</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="localGovernment" type="text" class="input flex-grow-1" placeholder="Local Govt. of Origin" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="identityFormGroup.controls['localGovernment'].errors?.required">This field is mandatory</a>
      </section>

      <!-- Address -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Address</label>

        <section class="input-container d-flex align-items-center">
          <textarea formControlName="address" type="text" class="input no-border flex-grow-1" placeholder="Please provide your residential address"></textarea>
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="identityFormGroup.controls['address'].errors?.required">This field is mandatory</a>
      </section>
    </form>

    <form [formGroup]="savingsFormGroup" fxLayout="column">
      <!-- DailySavings -->
      <section *ngIf="firstFormGroup.value.accountType == 'contributor'" class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">How much will you be saving per day?</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="dailySavings" type="number" class="input flex-grow-1" placeholder="Please provide intended amount" />
        </section>

        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="savingsFormGroup.controls['dailySavings'].errors?.required">This field is mandatory</a>
        <a class="clickable danger-text  justify-self-end align-self-end text-right" *ngIf="savingsFormGroup.controls['dailySavings'].errors?.min">You can only save minimum of N100 daily</a>
      </section>
    </form>

    <form [formGroup]="referralFormGroup" fxLayout="column">

      <!-- Referral code -->
      <section class="form-field d-flex shadow-sm flex-column p-2">
        <label class="label">Referral Code</label>

        <section class="input-container d-flex align-items-center">
          <input formControlName="referrerPhoneNumber" type="text" class="input flex-grow-1" placeholder="Provide referral code if any" />
        </section>
      </section>

    </form>
    <p>By clicking signup, you hereby read and accept our <a [routerLink]="['/termsandconditions']" class="styled-link">Terms & Conditions</a></p>

    <mat-spinner [diameter]="20" *ngIf="signingUp" mode="indeterminate" class="align-self-center justify-self-center"></mat-spinner>

    <!-- next button -->
    <section class="d-flex align-items-end justify-content-end">
      <button [disabled]="savingsFormGroup.invalid || savingsFormGroup.invalid || firstFormGroup.invalid || secondFormGroup.invalid || identityFormGroup.invalid" type="submit" (click)="signup()" class="main-btn d-flex align-items-center justify-content-center shadow-sm mt-3">Signup <i class="pi pi-arrow-right ml-2 pl-2"></i></button>
    </section>
  </section>
</main>
<app-footer></app-footer>